Public class ClostPastDueOpportunities {
	// vars for CloseDate and StageName
	List<Opportunity> ol = new List<Opportunity>();

    // methods
    Public static void closePastDueOpportunities(List<Opportunity> ol){
        // find opportunities that have passed their closed date
        //     and stage field is not 'Closed Won'.
        for(Opportunity o : ol) {
        	// mark those opportunities as 'Closed Lost'.
        
        	if((o.CloseDate < Date.today()) && (o.StageName <> 'Closed Won')) {
            		// assign StageName to 'ClosedLost' if past CloseDate and Not ClosedWon
            		// i.e. if the Opportunity is past CloseDate and it's not Closed Won            	
            		// System.debug(o.CloseDate + ' ' + o.StageName);
        	        o.StageName = 'Closed Lost';
        	}
		database.update(o);
        }
    }
}